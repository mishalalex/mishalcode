# MISHALCODE
------------

### Goal
--------
To create an online platform where users can solve coding challenges in different languages similar to leetcode or geeksforgeeks

### Technologies used
---------------------
### Backened - NodeJs, Express, Postgres, Prisma, Judge0
### Frontend - ReactJs, Tailwind-Css, DaisyUI, Zustand, Zod and React-Hook Forms

### API Architecture
--------------------
1. Authentication
2. Problem Management (CRUD operation related to the problem)
3. Code execution 
4. Submission
5. Playlist creation for a set of problems


### How does our platform operates
----------------------------------



### Steps followed
-------------------
1. folder -> mkdir backend frontend
2. file -> .gitignore
   1. added 'node_modules' and '.env' to this file
3. 'nodemmon' is installed universally via "npm i -g nodemon" command

Backend Folder
--------------
1. folder -> backend/src (here we will keep the backend code)
2. install express and dotenv packages
3. file -> backend/src/index.js
   1. setup a simple server using express and getting the port from dotenv file
4. prisma
   1. npm i prisma @prisma/client 
   2. npx prisma init (scaffolding prisma configurations are setup)
5. postgres
   1. we will run docker for postgres where the credentials are posted on environment vairable with port mapping to 5432 in detach mode
   2. docker command 'docker run --name my-postgres -e POSTGRES_USER=myuser -e POSTGRES_PASSWORD=mypassword -p 5432:5432 -d postgres'
   3. it will return a db connect url - "postgresql://myuser:mypassword@localhost:5432/postgres"
   4. update the database url in env file
6. folder -> src/libs
7. file -> src/libs/db.js (we will keep prisma client)
8. Update schema.prisma file with a db model
9. prisma commands to run 
   1.  npx generate prisma (update the db.js file with the prisma client setup code)
   2.  npx prisma migrate dev
   3.  npx prisma db push 
10. code the first route -> auth routes
    1.  folder -> src/routes -> file -> auth.routes.js
    2.  create an express routes -> const authRouter = express.Router()
    3.  create routes for register, login, logout and check like authRouter.post('/register', register) // 'register' in controller will be made in the second 
11. code the first controller -> auth controller
    1.  folder -> src/controllers -> file -> auth.controller.js
    2.  npm i bcryptjs
    3.  create controller for each routes like -> export const register = async (req, res) => {}
    4.  generate a 32 char random hex string using openssl command in bash -> "openssl rand -hex 32"
    5.  make an entry in the .env file the above random string as the JWT_SECRET
12. code the auth controller
    1.  get the data from the request by destructuring the request body
    2.  in a try-catch block, check whethehr a user exists in the db with the given email
    3.  if yes, throw an error
    4.  if no, then continue by creating a hash for the password 
    5.  make a db entry with the request data including the hashed password
    6.  make a JWT token using user id (autogenerated as configured in the prisma), JWT_SECRET in env file and an expiresIn
    7.  configure cookie using cookie-parser library by app.use(cookieParser()) in index.js file
    8.  configure cookie to be sent in response in the auth controller in response using res.cookie("jwt", token, {<other details>})
    9.  test using api test runner whether it is working